var SH=function(t){"use strict";var a=.5*Math.sqrt(1/Math.PI),r=.5*Math.sqrt(3/Math.PI),h=.5*Math.sqrt(15/Math.PI),M=.25*Math.sqrt(5/Math.PI),n=.25*Math.sqrt(15/Math.PI),e=[Math.PI,2*Math.PI/3,2*Math.PI/3,2*Math.PI/3,Math.PI/4,Math.PI/4,Math.PI/4,Math.PI/4,Math.PI/4],o=[a,r,r,r,h,h,M,h,n];function i(t,a,r,h,M,n,e,o,P){for(var s=r*h,u=0;u<1e4;++u)if(P+=I(t,o,a,r,h),++o===s)return void setTimeout(f,0,t,P,M,n,e);n&&n(o/s),setTimeout(i,0,t,a,r,h,M,n,e,o,P)}var P=new Float32Array(9);function I(t,a,r,h,M){var n=a%h,e=Math.floor(a/h),i=3*a,I=r[i],f=r[i+1],s=r[i+2],u=.5-(n/h*2-1),c=(e/M*2-1)*Math.PI/2,v=Math.cos(c),d=Math.cos(u*Math.PI)*v,l=-Math.sin(c),g=Math.sin(u*Math.PI)*v;P[0]=o[0],P[1]=o[1]*l,P[2]=o[2]*g,P[3]=o[3]*d,P[4]=o[4]*d*l,P[5]=o[5]*l*g,P[6]=o[6]*(3*g*g-1),P[7]=o[7]*g*d,P[8]=o[8]*(d*d-l*l);for(var p=v,q=0;q<9;++q){var w=t[q];w.r+=P[q]*I*p,w.g+=P[q]*f*p,w.b+=P[q]*s*p}return p}function f(t,a,r,h,M){for(var n=0;n<9;++n){var o=M.irradiance?e[n]:1;o*=4*Math.PI/a,t[n].r*=o,t[n].g*=o,t[n].b*=o}h&&h(1),r&&r(t)}return t.generateSH=function(t,a,r,h,M,n){void 0===(n=n||{}).irradiance&&(n.irradiance=!0);for(var e=t instanceof Uint8ClampedArray?function(t){for(var a=t.length,r=new Float32Array(a/4*3),h=0,M=0;h<a;h+=3,M+=4)r[h]=Math.pow(t[M]/255,2.2),r[h+1]=Math.pow(t[M+1]/255,2.2),r[h+2]=Math.pow(t[M+2]/255,2.2);return r}(t):t,o=[],P=0;P<9;++P)o[P]={r:0,g:0,b:0};i(o,e,a,r,h,M,n,0,0)},Object.defineProperty(t,"__esModule",{value:!0}),t}({});
