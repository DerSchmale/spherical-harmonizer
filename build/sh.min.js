var SH=function(t){"use strict";var a=.5*Math.sqrt(1/Math.PI),r=.5*Math.sqrt(3/Math.PI),n=.5*Math.sqrt(15/Math.PI),e=.25*Math.sqrt(5/Math.PI),h=.25*Math.sqrt(15/Math.PI),o=[Math.PI,2*Math.PI/3,2*Math.PI/3,2*Math.PI/3,Math.PI/4,Math.PI/4,Math.PI/4,Math.PI/4,Math.PI/4],M=[a,r,r,r,n,n,e,n,h];function i(t,a,r,n,e,h,o,M,P){for(var I=r*n,s=0;s<1e4;++s)if(P+=c(t,M,a,r,n),++M===I)return void setTimeout(f,0,t,P,e,h,o);h&&h(M/I),setTimeout(i,0,t,a,r,n,e,h,o,M,P)}var P=new Float32Array(9);function c(t,a,r,n,e){var h=a%n,o=Math.floor(a/n),i=3*a,c=r[i],f=r[i+1],I=r[i+2],s=.5-(h/n*2-1),u=(o/e*2-1)*Math.PI/2,v=Math.cos(u),d=Math.cos(s*Math.PI)*v,l=-Math.sin(u),g=Math.sin(s*Math.PI)*v;P[0]=M[0],P[1]=M[1]*l,P[2]=M[2]*g,P[3]=M[3]*d,P[4]=M[4]*d*l,P[5]=M[5]*l*g,P[6]=M[6]*(3*g*g-1),P[7]=M[7]*g*d,P[8]=M[8]*(d*d-l*l);for(var m=v,p=0;p<9;++p){var w=t[p];w.r+=P[p]*c*m,w.g+=P[p]*f*m,w.b+=P[p]*I*m}return m}function f(t,a,r,n,e){for(var h=0;h<9;++h){var M=e.irradiance?o[h]:1;M*=4*Math.PI/a,t[h].r*=M,t[h].g*=M,t[h].b*=M}n&&n(1),r&&r(t)}return t.encodeASH=function(t){for(var a="# Generated with @derschmale/spherical-harmonizer\n",r=0,n=0;n<3;++n){a+="\nl="+n+":\n";for(var e=-n;e<=n;++e)a+="m="+e+": ",a+=t[r].r+" "+t[r].g+" "+t[r].b+"\n",++r}return a},t.generateSH=function(t,a,r,n,e,h){void 0===(h=h||{}).irradiance&&(h.irradiance=!0);for(var o=t instanceof Uint8ClampedArray?function(t){for(var a=t.length,r=new Float32Array(a/4*3),n=0,e=0;n<a;n+=3,e+=4)r[n]=Math.pow(t[e]/255,2.2),r[n+1]=Math.pow(t[e+1]/255,2.2),r[n+2]=Math.pow(t[e+2]/255,2.2);return r}(t):t,M=[],P=0;P<9;++P)M[P]={r:0,g:0,b:0};i(M,o,a,r,n,e,h,0,0)},Object.defineProperty(t,"__esModule",{value:!0}),t}({});
